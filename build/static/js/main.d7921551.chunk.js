(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,n,t){e.exports=t(41)},22:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(15),o=t.n(u),c=t(16),l=t(2),i=function(e){var n=e.name,t=e.number,a=e.id,u=e.handleDelete;return r.a.createElement("div",null,n," ",t,r.a.createElement("button",{onClick:function(){return u(a,n)}},"Delete"))},m=function(e){var n=e.data,t=e.filter,a=e.handleDelete,u=n.filter(function(e){return e.name.toLowerCase().includes(t.toLowerCase())});return r.a.createElement("div",null,u.map(function(e){return r.a.createElement(i,{key:e.id,name:e.name,number:e.number,id:e.id,handleDelete:a})}))},f=function(e){var n=e.onSubmit,t=e.nameValue,a=e.numberValue,u=e.nameChange,o=e.numberChange;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"Name: ",r.a.createElement("input",{value:t,onChange:u})),r.a.createElement("div",null,"Number: ",r.a.createElement("input",{value:a,onChange:o})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Add")))},s=function(e){var n=e.value,t=e.onChange;return r.a.createElement("div",null,"Filter by name: ",r.a.createElement("input",{value:n,onChange:t}))},d=(t(22),function(e){var n=e.message;return null===n[0]?null:r.a.createElement("div",{className:n[1]},n[0])}),b=t(3),h=t.n(b),v="/api/persons",E=function(){return h.a.get(v).then(function(e){return e.data})},g=function(e){return h.a.post(v,e).then(function(e){return e.data})},p=function(e,n){return h.a.put("".concat(v,"/").concat(e),n).then(function(e){return e.data})},w=function(e){return h.a.delete("".concat(v,"/").concat(e)).then(function(e){return e.data})},j=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],u=n[1],o=Object(a.useState)(""),i=Object(l.a)(o,2),b=i[0],h=i[1],v=Object(a.useState)(""),j=Object(l.a)(v,2),C=j[0],O=j[1],D=Object(a.useState)(""),S=Object(l.a)(D,2),k=S[0],y=S[1],T=Object(a.useState)([null,"error"]),N=Object(l.a)(T,2),V=N[0],A=N[1];Object(a.useEffect)(function(){E().then(function(e){u(e)}).catch(function(e){console.log(e.response.data)})},[]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(d,{message:V}),r.a.createElement(s,{value:k,onChange:function(e){y(e.target.value)}}),r.a.createElement("h3",null,"Add a new name"),r.a.createElement(f,{onSubmit:function(e){e.preventDefault();var n={name:b,number:C};if(t.some(function(e){return e.name===b})){var a=t.find(function(e){return e.name===b}),r=Object(c.a)({},a,{number:C});window.confirm("".concat(b," is already added to phonebook. Replace the old number with a new one?"))&&p(a.id,r).then(function(e){u(t.map(function(n){return n.id!==a.id?n:e})),A(["Number for ".concat(e.name," was updated to ").concat(e.number),"message"]),setTimeout(function(){A([null,"message"])},3e3)}).catch(function(e){u(t.filter(function(e){return e.id!==a.id})),A(["".concat(a.name," was already deleted from server"),"error"]),setTimeout(function(){A([null,"error"])},3e3)})}else g(n).then(function(e){u(t.concat(e)),A(["".concat(e.name," was added to phonebook"),"message"]),setTimeout(function(){A([null,"message"])},3e3)}).catch(function(e){console.log(e.response.data),A(["".concat(e.response.data.error),"error"]),setTimeout(function(){A([null,"error"])},3e3)});h(""),O("")},nameValue:b,numberValue:C,nameChange:function(e){h(e.target.value)},numberChange:function(e){O(e.target.value)}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(m,{data:t,filter:k,handleDelete:function(e,n){window.confirm("Delete ".concat(n,"?"))&&w(e).then(function(n){u(t.filter(function(n){return n.id!==e})),A(["Deletion successful","message"]),setTimeout(function(){A([null,"message"])},3e3)}).catch(function(a){u(t.filter(function(n){return n.id!==e})),A(["".concat(n," was already deleted from server"),"error"]),setTimeout(function(){A([null,"error"])},3e3)})}}))};o.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.d7921551.chunk.js.map